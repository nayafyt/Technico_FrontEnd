<div class="container-repairsPage">
  <h2>Pending Repairs</h2>
  <div class="search-section">
    <form (ngSubmit)="searchRepairs()">
      <label for="startDate">Start Date:</label>
      <input
        type="date"
        id="startDate"
        [(ngModel)]="searchCriteria.startDate"
        name="startDate"
      />
      <label for="userId">User ID:</label>
      <input
        type="text"
        id="userId"
        placeholder="Search by User ID"
        [(ngModel)]="searchCriteria.userId"
        name="userId"
      />
      <button type="submit">Search</button>
      <a
        routerLink="/admin-homepage/create-repair-page"
        class="create-repair-button"
      >
        Create Repair
      </a>
    </form>
  </div>

  <div *ngIf="paginatedRepairs.length > 0">
    <div *ngFor="let repair of paginatedRepairs" class="repair-card">
      <div class="repair-info">
        <h3>{{ repair.title }}</h3>
        <p>Date: {{ repair.date }}</p>
        <p>Location: {{ repair.location }}</p>
        <p>Cost: ${{ repair.cost }}</p>
        <p>Owner: {{ repair.owner }}</p>
      </div>
      <div class="repair-description">
        <p>{{ repair.description }}</p>
      </div>
      <button class="accept-button"
        *ngIf="repair.status === 'pending'"
        class="repair-button"
        (click)="updateRepairStatus(repair, 'in progress')"
      >
        Accept
      </button>
      <button class="decline-button"
        *ngIf="repair.status === 'pending'"
        class="repair-button"
        (click)="updateRepairStatus(repair, 'declined')"
      >
        Decline
      </button>
      <button
        *ngIf="repair.status === 'in progress'"
        class="repair-button"
        [ngClass]="{ scheduled: repair.status === 'in progress' }"
      >
        {{ repair.status }}
      </button>
      <button
        *ngIf="repair.status === 'declined'"
        class="repair-button"
        [ngClass]="{ declined: repair.status === 'declined' }"
      >
        {{ repair.status }}
      </button>
    </div>

    <div class="pagination">
      <button
        (click)="changePage(currentPage - 1)"
        [disabled]="currentPage === 1"
      >
        Previous
      </button>
      <button
        *ngFor="let page of totalPagesList"
        (click)="changePage(page)"
        [class.active]="currentPage === page"
      >
        {{ page }}
      </button>
      <button
        (click)="changePage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
      >
        Next
      </button>
    </div>
  </div>
</div>